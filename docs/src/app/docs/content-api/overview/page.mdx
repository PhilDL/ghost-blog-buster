# Usage

The `@ts-ghost/content-api` allows you to build type-safe queries to the Ghost Content API endpoints and get back typed responses.

## Building Queries

Calling any resource like `authors`, `posts`, etc (except `settings` resource) will give a
new instance of APIComposer containing two exposed methods `read` and `browse` (if you are interested in a version that exposes `add`, `edit` and `delete` you will have to check the [@ts-ghost/admin-api](https://github.com/PhilDL/ts-ghost/tree/main/packages/ts-ghost-admin-api)).

This instance is already built with the associated Schema for that resource so any operation
you will do from that point will be typed against the asociated schema.

`browse` and `read` methods accept an options object. These params mimic the way Ghost API Content is built but with the power of Zod and TypeScript they are type-safe here.

```typescript
let query = api.posts.browse({
  limit: 5,
  order: "title DESC",
  //      ^? the text here will throw a TypeScript lint error if you use unknown field.
});
```

- `browse` will accept browse parameters like `page`, `limit`, `order`, `filter`.
- `read` parameters are `id` or `slug`.

## Browse multiple posts

```typescript
import { TSGhostContentAPI, type Post } from "@ts-ghost/content-api";

let url = "https://demo.ghost.io";
let key = "22444f78447824223cefc48062"; // Content API KEY should be in the right format corresponding to the Ghost Content API (26 Hex chars)
const api = new TSGhostContentAPI(url, key, "v5.0"); // The instantiation is validated through a zod Schema

// Browse posts
const res = await api.posts.browse().fetch();
if (res.success) {
  const posts = res.data;
  const meta = res.meta;
  //     ^? GhostMeta Type containing pagination info
  for (const post of posts) {
    //        ^? type Post
    console.log(post.title);
  }
} else {
  console.error(res.errors);
}
```

## Read one Post by slug

```typescript
import { TSGhostContentAPI } from "@ts-ghost/content-api";

let url = "https://demo.ghost.io";
let key = "22444f78447824223cefc48062"; // Content API KEY
const api = new TSGhostContentAPI(url, key, "v5.0");

const res = await api.posts
  .read({
    slug: "welcome-to-ghost",
  })
  .fetch();
if (res.success) {
  const post = res.data;
  //     ^? type Post
} else {
  console.error(res.errors);
}
```
